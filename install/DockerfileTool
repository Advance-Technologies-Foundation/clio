ARG NetCoreVersion=6.0
ARG AspEnvironment=Development

# CLIO RUNS UNDER .NET 6.0
FROM mcr.microsoft.com/dotnet/sdk:${NetCoreVersion}
ENV ASPNETCORE_ENVIRONMENT=${AspEnvironment} TZ=Europe/Kiev

# Set localtime on container
RUN ln -sf /usr/share/zoneinfo/Europe/Kiev /etc/localtime

# FOR CONVENIENCE I INSTALL SOME TOOLS
RUN apt-get update && apt-get -y install unzip curl nano bash
RUN dotnet tool install clio --global
RUN echo 'export PATH="$PATH:/root/.dotnet/tools"' >> ~/.bashrc

# REGISTER MY WEB APP, OR EXECUTE ANY OTHER CLI COMMAND
RUN bash -c "source ~/.bashrc && clio reg-web-app studiohs -u http://kkrylovn.tscrm.com:40015 -l Supervisor -p Supervisor"
RUN bash -c "source ~/.bashrc && clio cfg -a studiohs"


# ENTRYPOINT, FOR TESTING I NEED TO DROP INTO BASH
ENTRYPOINT ["/bin/bash"]